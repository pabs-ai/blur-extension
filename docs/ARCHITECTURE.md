# Blur Extension - Architecture Overview

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BROWSER ENVIRONMENT                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CONFERENCING PLATFORMS                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  Google Meet    â”‚              â”‚     Zoom        â”‚              â”‚
â”‚  â”‚  meet.google    â”‚              â”‚   zoom.us       â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚           â”‚                                â”‚                        â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                            â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SCREEN SHARE DETECTOR                           â”‚
â”‚                       (detector.js)                                  â”‚
â”‚                                                                      â”‚
â”‚  ğŸ“¡ Detection Methods:                                               â”‚
â”‚  1. Hook getDisplayMedia API â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  2. Monitor platform-specific indicators       â”‚                   â”‚
â”‚  3. DOM mutation observers                     â”‚                   â”‚
â”‚                                                 â”‚                   â”‚
â”‚  âœ… Detected: Send "SCREEN_SHARE_STARTED"      â”‚                   â”‚
â”‚  âŒ Stopped: Send "SCREEN_SHARE_STOPPED"       â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BACKGROUND SERVICE WORKER                          â”‚
â”‚                      (background.js)                                 â”‚
â”‚                                                                      â”‚
â”‚  ğŸ›ï¸ State Management:                                               â”‚
â”‚  â€¢ isScreenSharing: boolean                                         â”‚
â”‚  â€¢ isBlurEnabled: boolean                                           â”‚
â”‚  â€¢ activeTabId: number                                              â”‚
â”‚  â€¢ settings: object                                                 â”‚
â”‚                                                                      â”‚
â”‚  ğŸ“¨ Message Router:                                                  â”‚
â”‚  â€¢ Receives from: Detector, Content Scripts, Popup                  â”‚
â”‚  â€¢ Broadcasts to: All Content Scripts                               â”‚
â”‚                                                                      â”‚
â”‚  ğŸ’¾ Storage Manager:                                                 â”‚
â”‚  â€¢ Persist settings to chrome.storage.sync                          â”‚
â”‚  â€¢ Load settings on startup                                         â”‚
â”‚                                                                      â”‚
â”‚  âŒ¨ï¸ Keyboard Handler:                                                â”‚
â”‚  â€¢ Listens for Ctrl+Shift+B                                         â”‚
â”‚  â€¢ Toggles blur on/off                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                          â”‚
           â–¼                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   POPUP INTERFACE      â”‚              â”‚    CONTENT SCRIPTS          â”‚
â”‚    (popup.html/js)     â”‚              â”‚     (content.js)            â”‚
â”‚                        â”‚              â”‚                             â”‚
â”‚  ğŸ¨ User Interface:    â”‚              â”‚  ğŸ” Sensitive Data Scanner: â”‚
â”‚  â€¢ Enable/disable      â”‚              â”‚  â€¢ Pattern matching         â”‚
â”‚  â€¢ Blur intensity      â”‚              â”‚  â€¢ Site-specific selectors  â”‚
â”‚  â€¢ Data type toggles   â”‚              â”‚  â€¢ DOM traversal            â”‚
â”‚  â€¢ Site management     â”‚              â”‚                             â”‚
â”‚  â€¢ Settings panel      â”‚              â”‚  ğŸ­ Blur Applicator:        â”‚
â”‚                        â”‚              â”‚  â€¢ Apply CSS filters        â”‚
â”‚  ğŸ“Š Status Display:    â”‚              â”‚  â€¢ Track blurred elements   â”‚
â”‚  â€¢ Screen share status â”‚              â”‚  â€¢ Handle dynamic content   â”‚
â”‚  â€¢ Protection state    â”‚              â”‚                             â”‚
â”‚  â€¢ Active indicator    â”‚              â”‚  ğŸ‘€ Mutation Observer:       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â€¢ Monitor DOM changes      â”‚
                                        â”‚  â€¢ Debounced rescanning     â”‚
                                        â”‚  â€¢ Update blur state        â”‚
                                        â”‚                             â”‚
                                        â”‚  ğŸ’… Visual Indicator:        â”‚
                                        â”‚  â€¢ Show/hide badge          â”‚
                                        â”‚  â€¢ Green "Active" message   â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PROTECTED WEBSITES                              â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚    Gmail     â”‚  â”‚    Stripe    â”‚  â”‚  Salesforce  â”‚             â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚             â”‚
â”‚  â”‚ ğŸ“§ Emails    â”‚  â”‚ ğŸ’° Revenue   â”‚  â”‚ ğŸ¢ Accounts  â”‚             â”‚
â”‚  â”‚ ğŸ‘¤ Contacts  â”‚  â”‚ ğŸ’³ Cards     â”‚  â”‚ ğŸ’µ Deals     â”‚             â”‚
â”‚  â”‚ ğŸ“ Files     â”‚  â”‚ ğŸ”‘ API Keys  â”‚  â”‚ ğŸ‘¥ Contacts  â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                      â”‚
â”‚  ğŸ”’ With Blur Applied: Sensitive data obscured                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Interaction Flow

```
User Action: Start Screen Share
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ getDisplayMedia()    â”‚  â† Browser API called
â”‚ hook intercepts      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ detector.js          â”‚
â”‚ â€¢ Detects sharing    â”‚
â”‚ â€¢ Gets stream        â”‚
â”‚ â€¢ Monitors end       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Message: SCREEN_SHARE_STARTED
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ background.js        â”‚
â”‚ â€¢ Updates state      â”‚
â”‚ â€¢ Sets icon badge    â”‚
â”‚ â€¢ Shows notification â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Message: STATE_UPDATE
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ content.js           â”‚
â”‚ â€¢ Scans DOM          â”‚
â”‚ â€¢ Finds patterns     â”‚
â”‚ â€¢ Applies blur       â”‚
â”‚ â€¢ Shows indicator    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User sees:           â”‚
â”‚ ğŸŸ¢ Green badge       â”‚
â”‚ ğŸ‘ï¸ Blurred data      â”‚
â”‚ âš¡ Protection active  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Detection Pipeline

```
DOM Content
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Get Site Selectors  â”‚  Gmail: .gs .gD, .adn.ads
â”‚ (Site-Specific)     â”‚  Stripe: [data-test-id*="amount"]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  Salesforce: .forcePageBlockItem
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Query Matching      â”‚  document.querySelectorAll(selector)
â”‚ Elements            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Walk Text Nodes     â”‚  TreeWalker(SHOW_TEXT)
â”‚ (Pattern Scan)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Apply Patterns:     â”‚  Email: /\b[A-Za-z0-9._%+-]+@.../
â”‚ â€¢ Email             â”‚  Card: /\b(?:\d{4}[-\s]?){3}\d{4}\b/
â”‚ â€¢ Credit Card       â”‚  API: /sk_live_[A-Za-z0-9]+/
â”‚ â€¢ API Keys          â”‚  Revenue: /\$[\d,]+(?:\.\d{2})?/
â”‚ â€¢ Revenue           â”‚  SSN: /\b\d{3}-\d{2}-\d{4}\b/
â”‚ â€¢ SSN               â”‚
â”‚ â€¢ Phone             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Combine Results     â”‚  Set of elements to blur
â”‚ (Unique Elements)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Apply CSS Blur:     â”‚  element.style.filter = 'blur(10px)'
â”‚ â€¢ Add class         â”‚  element.classList.add('blur-protected')
â”‚ â€¢ Set filter        â”‚
â”‚ â€¢ Cache element     â”‚
â”‚ â€¢ Make unselectable â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Performance Optimization Strategy

```
DOM Changes Detected
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Debounce Timer      â”‚  Clear previous timeout
â”‚ (300ms)             â”‚  Set new timeout
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ After 300ms of no changes
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check Scan Lock     â”‚  if (isScanning) return;
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Lock acquired
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Scan DOM            â”‚  Performance-optimized:
â”‚ (Efficient)         â”‚  â€¢ Visibility checks
â”‚                     â”‚  â€¢ Cached selectors
â”‚                     â”‚  â€¢ Limited depth
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Apply Blur          â”‚  Only new elements:
â”‚ (Incremental)       â”‚  if (!blurredElements.has(el))
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Release Lock        â”‚  isScanning = false
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Chrome Storage (Sync)          â”‚
â”‚  â€¢ Persistent across sessions          â”‚
â”‚  â€¢ Synced across devices               â”‚
â”‚  â€¢ ~100KB quota                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ Load on startup
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Background Service Worker         â”‚
â”‚                                        â”‚
â”‚  State Object:                         â”‚
â”‚  {                                     â”‚
â”‚    isScreenSharing: false,             â”‚
â”‚    isBlurEnabled: true,                â”‚
â”‚    activeTabId: null,                  â”‚
â”‚    settings: {                         â”‚
â”‚      blurIntensity: 10,                â”‚
â”‚      dataTypes: {...},                 â”‚
â”‚      enabledSites: [...],              â”‚
â”‚      autoEnable: true,                 â”‚
â”‚      showIndicator: true               â”‚
â”‚    }                                   â”‚
â”‚  }                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ Broadcast on change
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Content Scripts (All Tabs)       â”‚
â”‚  â€¢ Receive state updates               â”‚
â”‚  â€¢ Apply new settings                  â”‚
â”‚  â€¢ Update blur state                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Security Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          User's Browser Tab            â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     Sensitive Content            â”‚ â”‚
â”‚  â”‚  â€¢ Emails                        â”‚ â”‚
â”‚  â”‚  â€¢ Credit cards                  â”‚ â”‚
â”‚  â”‚  â€¢ API keys                      â”‚ â”‚
â”‚  â”‚  â€¢ Revenue                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                            â”‚
â”‚           â”‚ Scanned locally            â”‚
â”‚           â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Blur Extension                 â”‚ â”‚
â”‚  â”‚   (Content Script)               â”‚ â”‚
â”‚  â”‚                                  â”‚ â”‚
â”‚  â”‚  âœ… Pattern matching (local)     â”‚ â”‚
â”‚  â”‚  âœ… CSS blur applied (local)     â”‚ â”‚
â”‚  â”‚  âœ… No data transmitted          â”‚ â”‚
â”‚  â”‚  âœ… No external requests         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                            â”‚
â”‚           â”‚ Visual output only         â”‚
â”‚           â–¼                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Screen Share Stream            â”‚ â”‚
â”‚  â”‚   (Blurred content visible)      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ Video stream
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Video Conference Participant      â”‚
â”‚  ğŸ‘ï¸ Sees blurred version only          â”‚
â”‚  âŒ Cannot access original content     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Structure

```
blur-extension/
â”‚
â”œâ”€â”€ manifest.json                 # Extension configuration
â”‚   â”œâ”€â”€ Defines permissions
â”‚   â”œâ”€â”€ Registers scripts
â”‚   â”œâ”€â”€ Sets up commands
â”‚   â””â”€â”€ Declares resources
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ background.js            # Service worker
â”‚   â”‚   â”œâ”€â”€ State management
â”‚   â”‚   â”œâ”€â”€ Message routing
â”‚   â”‚   â”œâ”€â”€ Storage handling
â”‚   â”‚   â””â”€â”€ Icon updates
â”‚   â”‚
â”‚   â”œâ”€â”€ detector.js              # Screen share detection
â”‚   â”‚   â”œâ”€â”€ getDisplayMedia hook
â”‚   â”‚   â”œâ”€â”€ Platform monitors
â”‚   â”‚   â”œâ”€â”€ DOM observers
â”‚   â”‚   â””â”€â”€ Event handlers
â”‚   â”‚
â”‚   â”œâ”€â”€ content.js               # Main blur logic
â”‚   â”‚   â”œâ”€â”€ DOM scanning
â”‚   â”‚   â”œâ”€â”€ Pattern matching
â”‚   â”‚   â”œâ”€â”€ Blur application
â”‚   â”‚   â”œâ”€â”€ Mutation observing
â”‚   â”‚   â””â”€â”€ Indicator management
â”‚   â”‚
â”‚   â”œâ”€â”€ blur.css                 # Visual styles
â”‚   â”‚   â”œâ”€â”€ Blur effects
â”‚   â”‚   â”œâ”€â”€ Indicator styles
â”‚   â”‚   â””â”€â”€ Animations
â”‚   â”‚
â”‚   â”œâ”€â”€ popup.html               # Settings UI
â”‚   â”œâ”€â”€ popup.css                # UI styles
â”‚   â””â”€â”€ popup.js                 # UI logic
â”‚
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ icon-16.png              # Toolbar icon (small)
â”‚   â”œâ”€â”€ icon-32.png              # Toolbar icon (retina)
â”‚   â”œâ”€â”€ icon-48.png              # Extensions page
â”‚   â”œâ”€â”€ icon-128.png             # Chrome store, notifications
â”‚   â””â”€â”€ icon-active-128.png      # Active state icon
â”‚
â””â”€â”€ docs/
    â”œâ”€â”€ README.md                # User guide
    â”œâ”€â”€ QUICKSTART.md            # Installation guide
    â”œâ”€â”€ TECHNICAL.md             # Developer docs
    â”œâ”€â”€ test-page.html           # Testing page
    â””â”€â”€ ARCHITECTURE.md          # This file
```

## Technology Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           BROWSER APIS                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ chrome.runtime (messaging)            â”‚
â”‚ â€¢ chrome.storage (persistence)          â”‚
â”‚ â€¢ chrome.tabs (state detection)         â”‚
â”‚ â€¢ chrome.commands (shortcuts)           â”‚
â”‚ â€¢ MediaDevices.getDisplayMedia          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         WEB STANDARDS                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ JavaScript ES2020+                    â”‚
â”‚ â€¢ HTML5                                 â”‚
â”‚ â€¢ CSS3 (filters, animations)            â”‚
â”‚ â€¢ DOM APIs (TreeWalker, MutationObs.)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       MANIFEST V3                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Service Workers (not background page) â”‚
â”‚ â€¢ Declarative permissions               â”‚
â”‚ â€¢ Async message passing                 â”‚
â”‚ â€¢ Content Security Policy               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Legend:**
- ğŸ“¡ Detection/Monitoring
- ğŸ›ï¸ State Management
- ğŸ“¨ Message Passing
- ğŸ’¾ Storage/Persistence
- âŒ¨ï¸ User Input
- ğŸ¨ User Interface
- ğŸ” Content Scanning
- ğŸ­ Visual Effects
- ğŸ‘€ Observation
- ğŸŸ¢ Active State
- âœ… Success/Complete
- âŒ Stopped/Disabled
